/*
 * ***** BEGIN LICENSE BLOCK *****
 * Version: MIT
 *
 * Copyright (c) 2016-2017 Thierry Matthey
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use, copy,
 * modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * ***** END LICENSE BLOCK *****
 */

using System;
using Math;


namespace App.Minetti
{
    public class Program
    {
        private static void Main(string[] args)
        {
            double[,] height = 
                {{99.77684563758389,16.07013690293655},
                {99.77125279642057,24.10735434302517},
                {99.76565995525728,31.061481518460145},
                {99.74328859060404,38.0199066711358},
                {99.70973154362416,45.4382153885652},
                {99.69854586129753,52.85652410599458},
                {99.69295302013424,61.67167542664793},
                {99.68736017897092,75.00829880450621},
                {99.72091722595079,80.20025531125866},
                {99.76565995525728,89.98674948830772},
                {99.82158836689037,99.76894568811613},
                {99.87751677852349,101.03684897411942},
                {99.91107382550337,114.1370836037398},
                {99.91666666666666,123.04679042368832},
                {99.90548098434004,126.04248056044861},
                {99.87751677852349,137.30318093105404},
                {99.82718120805369,145.2501408490882},
                {99.81599552572708,153.19280278988165},
                {99.79362416107382,161.1397627079158},
                {99.78803131991052,169.0824246487093},
                {99.78243847874721,176.78869784126488},
                {99.78803131991052,189.08950870411704},
                {99.78243847874721,191.191219574814},
                {99.79362416107382,201.74705167794644},
                {99.83836689038031,212.3071817583196},
                {99.80480984340045,223.31430147172438},
                {99.79362416107382,227.9346270054652},
                {99.78803131991052,236.07069792208964},
                {99.74328859060404,244.03914772632723},
                {99.7321029082774,252.00759753056477},
                {99.72091722595079,259.97604733480244},
                {99.70413870246084,268.64506742927233},
                {99.7321029082774,277.79975895194013},
                {99.77125279642057,286.9544504746079},
                {99.79362416107382,289.89856488448},
                {99.81599552572708,293.56044149354705},
                {99.79921700223713,299.990215445618},
                {99.76565995525728,308.85694249315964},
                {99.72651006711409,313.0517682800721},
                {99.6761744966443,320.6248041781663},
                {99.62024608501119,329.3711878629686},
                {99.55313199105146,338.1218695250117},
                {99.49161073825503,346.868253209814},
                {99.418903803132,359.31519529884963},
                {99.34619686800895,362.82664270449254},
                {99.28467561521254,369.7163002213173},
                {99.22874720357942,376.60595773814185},
                {99.167225950783,384.3208268851788},
                {99.1168903803132,386.52568920965234},
                {99.08892617449665,393.4755184078466},
                {99.04418344519016,400.42534760604093},
                {98.99944071588368,409.0599838825853},
                {98.9658836689038,418.9840133313364},
                {98.89876957494407,429.6129110475606},
                {98.82606263982103,440.2461067410254},
                {98.72539149888142,444.44952848241934},
                {98.54082774049218,446.32344655935975},
                {98.23881431767337,453.68158359541957},
                {97.84731543624162,461.03972063147927},
                {97.31599552572708,469.0597461626052},
                {96.7175615212528,477.0840696709717},
                {96.25335570469798,489.4493501924342},
                {95.78355704697987,492.19575764923457},
                {95.49832214765101,494.03958988549016},
                {95.32494407158838,496.1498967106686},
                {95.25223713646533,502.87193311510634},
                {95.19630872483222,516.1913645840018},
                {94.99496644295303,523.9148296855202},
                {94.81599552572706,532.695597188248},
                {94.60906040268456,538.2270938970149},
                {94.47483221476509,546.2213315646966},
                {94.45805369127517,554.2112712551376},
                {94.6258389261745,558.7327433123426},
                {94.89429530201342,572.2756695977539},
                {95.1907158836689,578.6495698456957},
                {95.38646532438479,585.9174493597011},
                {95.46476510067114,593.1810308964657},
                {95.40324384787472,597.5090939778397},
                {95.28579418344518,604.4546251987932},
                {95.19630872483222,611.3958584425062},
                {95.15715883668904,618.212450346239},
                {95.0900447427293,625.0290422499719},
                {95.0397091722595,633.2897545065764},
                {95.05089485458612,636.3842981198725},
                {95.05648769574944,641.8083453976221},
                {95.06208053691276,647.382821878796},
                {95.0341163310962,656.464447788372},
                {94.9837807606264,659.6535469009634},
                {94.91107382550335,662.4859139025775},
                {94.79921700223714,671.6663932886894},
                {94.66498881431767,682.0674982111572},
                {94.46923937360178,692.0602952957593},
                {94.22874720357942,695.0130056601126},
                {93.9658836689038,708.4699724007102},
                {93.61912751677852,715.853897300214},
                {93.32270693512304,719.975657474035},
                {93.00950782997762,721.2564546917602},
                {92.72986577181209,724.2263569650764},
                {92.5341163310962,729.5945305386972},
                {92.22651006711409,736.1919256031548},
                {92.02516778523488,739.9956354611646},
                {91.79026845637583,742.9741336889624},
                {91.51062639821029,745.853778440224},
                {91.27572706935123,749.6660842527152},
                {91.01845637583892,761.5070115508138},
                {90.78355704697987,769.2820523792203},
                {90.54306487695749,775.0026600865775},
                {90.43120805369128,781.3593684255567},
                {90.27460850111856,786.9037590660457},
                {90.10123042505593,797.0727732175161},
                {89.95581655480984,807.2417873689865},
                {89.75447427293065,815.2704088545938},
                {89.49720357941834,819.4523407097842},
                {89.23993288590604,826.1442912735372},
                {88.98266219239373,827.2961491740418},
                {88.76454138702461,829.0411279337615},
                {88.58557046979865,832.9393932910665},
                {88.37863534675614,834.6499882328608},
                {88.18288590604027,837.233072554515},
                {87.98713646532438,840.0095658520002},
                {87.7410514541387,847.449364455633},
                {87.43903803131991,849.134171533983},
                {87.15939597315436,855.9034856880684},
                {86.86856823266218,866.7644741752898},
                {86.6168903803132,877.6297606397519},
                {86.54977628635348,888.2414664470132},
                {86.60570469798657,891.7872976705818},
                {86.63366890380313,895.8531841402736},
                {86.65604026845637,903.4949876742189},
                {86.63366890380313,909.1296358367624},
                {86.52181208053692,918.146792087728},
                {86.39876957494407,927.1639483386939},
                {86.20302013422818,934.8143478271204},
                {86.06319910514542,945.5034172247142},
                {86.00167785234899,954.4475078625883},
                {86.0072706935123,963.3915985004621},
                {86.04642058165548,968.8199437554526},
                {86.06319910514542,975.3829550019847},
                {86.06319910514542,979.1866648599946},
                {86.01286353467562,988.0104121351294},
                {85.95134228187919,992.1837480358386},
                {85.92897091722595,996.1980587786421},
                {85.96812080536913,1004.0031854477337},
                {86.0576062639821,1011.8040141395844},
                {86.18624161073825,1023.6363454832014},
                {86.34284116331095,1031.2953409261095},
                {86.51062639821029,1038.9543363690173},
                {86.67281879194631,1044.0861211944},
                {86.79586129753915,1051.053142301557},
                {86.9244966442953,1055.338225610524},
                {87.00838926174497,1059.833909804285},
                {87.081096196868,1064.6261544276535},
                {87.17058165548099,1070.9570749031884},
                {87.25447427293065,1079.9398473362287},
                {87.332774049217,1088.918321792028},
                {87.39988814317672,1090.0186039656446},
                {87.42785234899328,1100.007103073006},
                {87.37192393736017,1101.5500769024134},
                {87.11465324384788,1108.744890803327},
                {86.63926174496645,1117.1302443999116},
                {85.82829977628636,1127.2691727106971},
                {84.58668903803132,1131.360847043833},
                {83.45134228187919,1135.1817488108056},
                {82.1761744966443,1140.4725587940939},
                {81.00167785234899,1141.976850828335},
                {80.02852348993288,1148.4539025300537},
                {78.97706935123043,1150.1387096084038},
                {78.1996644295302,1152.137269025324},
                {77.52293064876957,1153.5384096057887},
                {76.82382550335569,1154.6386917794052},
                {76.11912751677852,1156.2805190853485},
                {75.3920581655481,1158.9495629518165},
                {74.51957494407158,1160.90514259633},
                {73.64149888143176,1162.383646767127},
                {72.92002237136465,1164.2059891171791},
                {72.2321029082774,1168.8220166736794},
                {71.44351230425056,1170.5412075699548},
                {70.67729306487695,1171.6285958118492},
                {70.10123042505593,1173.9237156583772},
                {69.13366890380313,1178.475273556267},
                {68.2555928411633,1183.8520430843691},
                {67.60123042505593,1188.2531717788345},
                {66.91331096196868,1193.6514311931403},
                {66.58333333333333,1196.9565756912302},
                {66.35402684563759,1199.518170126681},
                {66.15827740492169,1204.1943693645505},
                {65.92897091722595,1209.05538162377},
                {65.76118568232663,1221.7344144838025},
                {65.52069351230425,1228.104016754504},
                {65.16834451901565,1231.5037167518892},
                {65.3473154362416,1235.7587142201714},
                {65.22427293064877,1240.4478073897633},
                {65.01733780760627,1243.1125532789904},
                {64.79362416107382,1247.943479697525},
                {64.33501118568233,1253.4663804518102},
                {63.74217002237136,1257.037999538823},
                {63.188478747203575,1260.69987614789},
                {62.60123042505593,1268.1009929563568},
                {61.86856823266219,1273.2069899182954},
                {61.24776286353468,1280.6124047040028},
                {60.710850111856814,1288.0221174669507},
                {60.252237136465325,1289.663944772894},
                {60.022930648769574,1291.4218174643358},
                {59.90548098434004,1295.113779914088},
                {59.871923937360165,1304.1825118919417},
                {59.82158836689037,1308.480489132631},
                {59.59228187919462,1316.2813178244817},
                {59.59787472035794,1321.3529309684945},
                {59.413310961968676,1330.9546121241942},
                {59.08333333333333,1334.135115282304},
                {58.98825503355704,1337.4058759624684},
                {58.865212527964204,1344.716735248881},
                {58.72539149888142,1352.0232965580522},
                {58.70302013422818,1354.0562397928982},
                {58.50727069351231,1356.630728160071},
                {58.13814317673377,1359.437307298241},
                {57.6907158836689,1365.862783273071},
                {56.93568232662192,1372.915763925042},
                {56.0128635346756,1376.048989333504},
                {55.09563758389261,1389.5231479830647},
                {53.887583892617435,1391.938611192332},
                {52.998322147651,1396.4085075226485},
                {52.15380313199104,1400.581843423358},
                {51.21979865771812,1404.7293914606228},
                {50.33053691275167,1413.144830897892},
                {49.35178970917226,1421.5602703351612},
                {48.41219239373602,1426.8081005460424},
                {47.84731543624161,1430.3152499744451},
                {47.461409395973156,1432.765097001638},
                {47.120246085011175,1435.322393459848},
                {46.790268456375834,1438.8897145696199},
                {46.17505592841162,1449.6948293527118},
                {45.35850111856822,1455.926896351711},
                {44.55313199105145,1463.9254319966337},
                {43.70861297539149,1466.7191172030819},
                {43.01510067114094,1471.855200005705},
                {42.31599552572706,1478.8351150445842},
                {41.6224832214765,1481.4697750931266},
                {40.99049217002237,1486.1889541034034},
                {40.31375838926174,1490.3923758447972},
                {39.6817673378076,1497.5785937912294},
                {39.055369127516784,1501.5714146478292},
                {38.47930648769574,1511.4309744379702},
                {38.03747203579419,1521.290534228111},
                {37.590044742729305,1524.5269110903503},
                {37.34395973154361,1526.9939500265054},
                {37.120246085011175,1533.0412040041551},
                {36.88534675615211,1539.4967658196701},
                {36.644854586129746,1548.29042725412},
                {36.29809843400446,1550.1944311717452},
                {35.928970917225946,1560.2001221880698},
                {35.431208053691265,1568.7058191473934},
                {34.888702460850105,1574.224421924438},
                {34.290268456375834,1580.5123626275663},
                {33.69183445190156,1586.043859336333},
                {33.24440715883669,1590.148427601191},
                {32.852908277404914,1593.9736273454043},
                {32.44463087248321,1598.2028369502427},
                {31.980425055928407,1601.9893548992895},
                {31.38758389261744,1613.0437523623423},
                {30.53747203579417,1615.5666650026267},
                {29.810402684563748,1623.664054124085},
                {29.111297539149884,1628.4820866108973},
                {28.557606263982105,1631.6110140421195},
                {28.35626398210289,1639.953387866297},
                {28.51286353467561,1642.2742955762687},
                {28.680648769574937,1644.178299493894},
                {28.826062639821025,1647.8487720574424},
                {28.90995525727068,1654.0421572612752},
                {28.753355704697988,1657.8759529599702},
                {28.434563758389256,1660.3859716685326},
                {28.1996644295302,1664.8429740671272},
                {27.718680089485456,1668.8357949237275},
                {26.862975391498882,1672.6781865769035},
                {25.889821029082768,1681.3944844210207},
                {24.575503355704694,1688.3915913688627},
                {23.05984340044743,1695.3886983167044},
                {21.4211409395973,1701.341396795059},
                {19.69295302013423,1709.0132861696889},
                {17.81935123042505,1716.685175544319},
                {15.447986577181215,1722.4444650468424},
                {13.417785234899327,1727.9028961425176},
                {11.549776286353449,1738.7037129483695},
                {9.799217002237139,1742.2667360809007},
                {9.20637583892616,1752.5217097771847},
                {9.083333333333325,1759.0245493423474},
                {9.441275167785232,1761.9729617294602},
                {10.185123042505579,1771.7938397244347},
                {11.18624161073824,1779.977188390707},
                {11.902125279642053,1785.5086850994737},
                {12.584451901565982,1791.749348052954},
                {13.009507829977611,1800.3453025343324},
                {13.406599552572706,1808}};
            var xl0 = height[0, 1];
            var xl1 = height[height.GetLength(0)-1, 1];
            var yl0 = 0.0;
            var yl1 = 42060.0;
            var xh0 = height[0, 0];
            var xh1 = height[height.GetLength(0) - 1, 0];
            var yh0 = 566.90;
            var yh1 = 2092.43;
            var l0 = 0.0;
            var h0 = 0.0;
            var sum = 0.0;
            for (var  i=0;i< height.GetLength(0);i++)
            {
                var l = Function.Interpolate(height[i, 1], xl0, xl1, yl0, yl1);
                var h = Function.Interpolate(height[i, 0], xh0, xh1, yh0, yh1);
                var gradient = 0.0;
                if (i > 0)
                {
                    gradient = (h - h0) / (l - l0);
                }
                var minetti = Function.MinettiFactor(gradient);
                Console.WriteLine("{0},{1},{2},{3}", l, h, gradient, minetti);
                sum += minetti*(l-l0);
                l0 = l;
                h0 = h;

            }

            Console.WriteLine("Minetti: {0}", sum / yl1);
        }


       

       


    }
}